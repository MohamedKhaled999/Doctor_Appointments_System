<div class="row">
  <div class="col-12 col-lg-2 text-center">
    <img
      [src]="
        'https://doc-net2.runasp.net/uploads/images/' + doctor.profilePictureUrl
      "
      class="rounded-circle img-thumbnail"
      height="100"
      width="100"
      alt=""
    />
  </div>
  <div class="col-12 col-lg-3 text-center text-lg-start">
    <p class="mb-1 fw-bold">Dr. {{ doctor.name }}</p>
    <p class="mb-1 fw-bold">{{ doctor.title }}</p>
    <p class="mb-1">{{ doctor.qualifications }}</p>
    <p class="mb-1 fw-bold SP-fees">{{ doctor.fees }} EÂ£</p>
  </div>
  <div
    class="col-12 col-lg-7 flex-wrap justify-content-center gap-2 SP-bookCards"
  >
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <!-- <div *ngFor="let appointment of doctor.reservations">
                    <app-reservation-card [reservation]="appointment"></app-reservation-card>
                </div> -->
        @if(doctor.reservations.length == 0) {
        <div class="card d-flex text-center swiper-slide w-100">
          <div class="card-header SP-bookHeader p-1">No Appointments</div>
          <div
            class="card-body SP-primaryText flex-column justify-content-center p-2"
          >
            <p class="mb-1">No Available</p>
            <p class="mb-1">Appointments</p>
          </div>
          @if (userData.UserRole() !== "doctor") {
          <a class="card-footer btn disabled SP-bookBTN p-1">Book</a>
          } @else {
          <a class="card-footer btn disabled SP-bookBTN p-1"
            >Doctors can't book in this release</a
          >
          }
        </div>
        } @else {
        <!-- toggle the "special" class on/off with a property -->
        <!-- <div class= "card d-flex text-center swiper-slide" [ngClass]="doctor.reservations.length == 2 ? ' w-50' : doctor.reservations.length == 1 ? 'w-100' : ''">
                        <app-reservation-card *ngFor="let reservation of doctor.reservations" [app]="reservation"></app-reservation-card> -->
        <!-- <div *ngFor="let appointment of doctor.reservations">
                            <app-reservation-card [app]="appointment"></app-reservation-card>
                        </div> -->
        <!-- </div> -->

        <swiper-container
          class=""
          navigation="false"
          pagination="false"
          scrollbar="true"
          slides-per-view="3"
        >
          @for (reservation of doctor.reservations; track $index) {
          <swiper-slide
            class="card d-flex text-center"
            [ngClass]="
              doctor.reservations.length == 2
                ? ' w-50'
                : doctor.reservations.length == 1
                ? 'w-100'
                : ''
            "
          >
            <app-reservation-card
              [appointment]="reservation"
            ></app-reservation-card>
          </swiper-slide>
          }
        </swiper-container>
        }
      </div>
      <div class="swiper-scrollbar position-static mt-2"></div>
    </div>
  </div>
</div>

<div class="col-12">
  <p class="mb-1 text-center text-lg-start">Speciality:</p>
  <div class="SP-badge-scroll d-flex flex-wrap gap-1">
    <span
      class="badge rounded-pill SP-badge"
      *ngFor="let speciality of doctor.specializations"
      >{{ speciality }}</span
    >
  </div>
</div>
<div class="w-100"></div>
<div class="d-flex flex-wrap col-12 align-items-center">
  <div class="flex-grow-1 col-12 col-lg-8 d-flex justify-content-around mt-3">
    <div>
      <i class="fa-solid fa-star SP-icon"></i
      ><span class="ms-2">{{ doctor.rating }}</span>
    </div>
    <div>
      <i class="fa-solid fa-stopwatch SP-icon"></i
      ><span class="ms-2">{{ doctor.waitingTime }} Minutes</span>
    </div>
    <div>
      <i class="fa-solid fa-location-dot SP-icon"></i
      ><span class="ms-2"
        >{{ doctor.governorate }} : {{ doctor.location }}</span
      >
    </div>
  </div>
  <div class="col-12 col-lg-4 d-flex mt-3 gap-1">
    <a [href]="'tel:' + doctor.phone" class="btn col-6 SP-callBTN">
      <i class="fa-solid fa-phone-volume me-2"></i>
      {{ doctor.phone }}
    </a>

    <a
      [routerLink]="['/profile/doctor', doctor.id]"
      class="btn col-6 SP-callBTN"
    >
      View Doctor
    </a>
  </div>
</div>
